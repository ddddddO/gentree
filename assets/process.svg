<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="945px" preserveAspectRatio="none" style="width:584px;height:945px;background:#008B8B;" version="1.1" viewBox="0 0 584 945" width="584px" zoomAndPan="magnify"><defs/><g><!--MD5=[6328af41db0f7dbb733c9192827ed26b]
cluster pipeline--><g id="cluster_pipeline"><rect fill="none" height="763.72" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;" width="522" x="7" y="176"/><path d="M82,176 L82,185.2969 L72,195.2969 L7,195.2969 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="65" x="10" y="189.9951">Pipeline</text></g><!--MD5=[dfbaac2615e6b58919aa7dca9cc5848c]
entity split_proc--><g id="elem_split_proc"><ellipse cx="430" cy="290.22" fill="#F1F1F1" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="426,278.22,432,273.22,430,278.22,432,283.22,426,278.22" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="394.5" y="319.2151">Split input</text></g><!--MD5=[16aaf2b6864aec8a97df8ae5faa71f6b]
entity splited--><g id="elem_splited"><rect fill="#F1F1F1" height="64.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="66" x="216" y="267.72"/><rect fill="#F1F1F1" height="64.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="66" x="212" y="263.72"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="220" y="284.7151">- root1</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18" x="236" y="301.012">- a</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18" x="252" y="317.3089">- b</text></g><!--MD5=[883626f3ee9e613e4e1695c2a8f9e35f]
entity generate_root_worker--><g id="elem_generate_root_worker"><ellipse cx="398" cy="408.72" fill="#F1F1F1" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="394,396.72,400,391.72,398,396.72,400,401.72,394,396.72" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="328" y="437.7151">Generate root node</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="328" y="454.012">(10 workers)</text></g><!--MD5=[d42658a875e6b366d8ed22b8f1d49d51]
entity grow_worker--><g id="elem_grow_worker"><ellipse cx="350" cy="533.72" fill="#F1F1F1" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="346,521.72,352,516.72,350,521.72,352,526.72,346,521.72" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="295" y="562.7151">Grow root node</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="295" y="579.012">(10 workers)</text></g><!--MD5=[d0e066c1a14392698745467dd17d345b]
entity spread_worker--><g id="elem_spread_worker"><ellipse cx="264" cy="758.72" fill="#F1F1F1" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="260,746.72,266,741.72,264,746.72,266,751.72,260,746.72" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="220" y="787.7151">Spread tree</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="220" y="804.012">(10 workers)</text></g><!--MD5=[dabf35e28b0fe3e280879f10955a7220]
entity mkdir_worker--><g id="elem_mkdir_worker"><ellipse cx="387" cy="758.72" fill="#F1F1F1" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="383,746.72,389,741.72,387,746.72,389,751.72,383,746.72" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="343" y="787.7151">Mkdir tree</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="343" y="804.012">(10 workers)</text></g><!--MD5=[e5273a64d836932b64ae1e1963307c07]
entity verify_worker--><g id="elem_verify_worker"><ellipse cx="141" cy="758.72" fill="#F1F1F1" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="137,746.72,143,741.72,141,746.72,143,751.72,137,746.72" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="97" y="787.7151">Verify tree</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="97" y="804.012">(10 workers)</text></g><!--MD5=[c5c948d6d2820c5c03fe633a7cc80e1b]
entity error_handler--><g id="elem_error_handler"><ellipse cx="387" cy="883.72" fill="#CC6699" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="383,871.72,389,866.72,387,871.72,389,876.72,383,871.72" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="317" y="912.7151">Handle error queue</text></g><!--MD5=[bdc70ded9b301535bd788a3720b71b1a]
entity split_q--><g id="elem_split_q"><path d="M130,412.22 L288,412.22 C293,412.22 293,425.3684 293,425.3684 C293,425.3684 293,438.5169 288,438.5169 L130,438.5169 C125,438.5169 125,425.3684 125,425.3684 C125,425.3684 125,412.22 130,412.22 " fill="#00BFFF" style="stroke:#0000FF;stroke-width:0.5;"/><path d="M288,412.22 C283,412.22 283,425.3684 283,425.3684 C283,438.5169 288,438.5169 288,438.5169 " fill="none" style="stroke:#0000FF;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="148" x="130" y="430.2151">Markdown root block</text></g><!--MD5=[6e6f018fbbc8ddecf21b773d66d61cba]
entity root_q--><g id="elem_root_q"><path d="M171.5,537.22 L254.5,537.22 C259.5,537.22 259.5,550.3684 259.5,550.3684 C259.5,550.3684 259.5,563.5169 254.5,563.5169 L171.5,563.5169 C166.5,563.5169 166.5,550.3684 166.5,550.3684 C166.5,550.3684 166.5,537.22 171.5,537.22 " fill="#00BFFF" style="stroke:#0000FF;stroke-width:0.5;"/><path d="M254.5,537.22 C249.5,537.22 249.5,550.3684 249.5,550.3684 C249.5,563.5169 254.5,563.5169 254.5,563.5169 " fill="none" style="stroke:#0000FF;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="171.5" y="555.2151">Root node</text></g><!--MD5=[759ebcdd875c10595d278c9d978c4973]
entity growing_q--><g id="elem_growing_q"><path d="M274.5,649.72 L425.5,649.72 C430.5,649.72 430.5,662.8684 430.5,662.8684 C430.5,662.8684 430.5,676.0169 425.5,676.0169 L274.5,676.0169 C269.5,676.0169 269.5,662.8684 269.5,662.8684 C269.5,662.8684 269.5,649.72 274.5,649.72 " fill="#00BFFF" style="stroke:#0000FF;stroke-width:0.5;"/><path d="M425.5,649.72 C420.5,649.72 420.5,662.8684 420.5,662.8684 C420.5,676.0169 425.5,676.0169 425.5,676.0169 " fill="none" style="stroke:#0000FF;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141" x="274.5" y="667.7151">Tree structure node</text></g><g id="elem_GMN19"><path d="M31,642.72 L31,682.9856 A0,0 0 0 0 31,682.9856 L197,682.9856 A0,0 0 0 0 197,682.9856 L197,666.72 L269.25,662.72 L197,658.72 L197,652.72 L187,642.72 L31,642.72 A0,0 0 0 0 31,642.72 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M187,642.72 L187,652.72 L197,652.72 L187,642.72 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="37" y="659.7869">Next process is</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="37" y="674.9197">Spred, Mkdir or Verify.</text></g><!--MD5=[c88a36799ca4d6dff2d7449eacfc25f7]
entity start--><g id="elem_start"><ellipse cx="308" cy="75" fill="#CCFF33" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="284.5" y="104.9951">START</text></g><!--MD5=[a3e2068675f98e81fa0b31e92b58c8a6]
entity markdown--><g id="elem_markdown"><rect fill="#F1F1F1" height="136.375" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="70" x="194" y="7"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="204" y="22.9951">- root1</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18" x="220" y="39.292">- a</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18" x="236" y="55.5889">- b</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="204" y="71.8857">- root2</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="17" x="220" y="88.1826">- c</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="204" y="104.4795">- root3</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18" x="220" y="120.7764">- d</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18" x="236" y="137.0732">- e</text></g><g id="elem_init"><ellipse cx="429.7532" cy="74.9506" fill="#F1F1F1" rx="77.7532" ry="17.9506" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113" x="370.6994" y="78.5809">Launch pipeline</text></g><!--MD5=[22efa60cf2b4332bf8574b0c93969d71]
entity end--><g id="elem_end"><ellipse cx="562" cy="891.72" fill="#CCFF33" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="547" y="921.7151">END</text></g><!--MD5=[5b4cc3b64451edfab5f176f532845691]
link markdown to start--><g id="link_markdown_start"><path d="M264.18,75 C275.71,75 287.23,75 298.76,75 " fill="none" id="markdown-start" style="stroke:#00BFFF;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/></g><!--MD5=[454b0b980ae1095b7473d8b1e9bb6cba]
link start to init--><g id="link_start_init"><path d="M317.05,75 C321.96,75 326.86,75 331.76,75 " fill="none" id="start-to-init" style="stroke:#00BFFF;stroke-width:1.0;"/><polygon fill="none" points="331.91,68,351.91,75,331.91,82,331.91,68" style="stroke:#00BFFF;stroke-width:1.0;"/></g><!--MD5=[7060c70beb0e2460c89b992bca283af7]
link init to pipeline--><g id="link_init_pipeline"><path d="M430,93.04 C430,110.015 430,136.7625 430,159.5513 C430,165.2484 430,170.6982 430,175.686 " fill="none" id="init-to-pipeline" style="stroke:#00BFFF;stroke-width:1.0;"/><polygon fill="#008B8B" points="430,175.686,437,156.686,423,156.686,430,175.686" style="stroke:#00BFFF;stroke-width:1.0;"/></g><!--MD5=[4bc466e259f359bb306de2e4df9da546]
link pipeline to split_proc--><g id="link_pipeline_split_proc"><path d="M430,203.79 C430,205.24 430,229.89 430,253.5 " fill="none" id="pipeline-to-split_proc" style="stroke:#00BFFF;stroke-width:1.0;"/><polygon fill="none" points="437,253.78,430,273.78,423,253.78,437,253.78" style="stroke:#00BFFF;stroke-width:1.0;"/></g><!--MD5=[7853469dae6b86297a6cab5bdc83c2c5]
link split_proc to splited--><g id="link_split_proc_splited"><path d="M394.45,298.22 C356.98,298.22 319.5,298.22 282.03,298.22 " fill="none" id="split_proc-splited" style="stroke:#00BFFF;stroke-width:1.0;"/></g><!--MD5=[6496682d3967b5f7685c79a7851e2b2d]
link splited to split_q--><g id="link_splited_split_q"><path d="M236.72,333.05 C231.06,351.65 224.09,374.59 218.55,392.8 " fill="none" id="splited-to-split_q" style="stroke:#00BFFF;stroke-width:1.0;"/><polygon fill="none" points="225.21,394.97,212.69,412.07,211.81,390.9,225.21,394.97" style="stroke:#00BFFF;stroke-width:1.0;"/></g><!--MD5=[12cd5d76f0e65352ab6f4dee1eb8cb7d]
link split_q to generate_root_worker--><g id="link_split_q_generate_root_worker"><path d="M293.16,425.22 C298.06,425.22 302.95,425.22 307.85,425.22 " fill="none" id="split_q-to-generate_root_worker" style="stroke:#00BFFF;stroke-width:1.0;"/><polygon fill="none" points="307.97,418.22,327.97,425.22,307.97,432.22,307.97,418.22" style="stroke:#00BFFF;stroke-width:1.0;"/></g><!--MD5=[b33f49e90cd4e1fd8720b8291fe977c4]
link generate_root_worker to root_q--><g id="link_generate_root_worker_root_q"><path d="M350.36,457.9 C318.57,479.03 277.45,506.37 248.51,525.61 " fill="none" id="generate_root_worker-to-root_q" style="stroke:#00BFFF;stroke-width:1.0;"/><polygon fill="none" points="252.01,531.69,231.48,536.93,244.26,520.03,252.01,531.69" style="stroke:#00BFFF;stroke-width:1.0;"/></g><!--MD5=[a2cfaee57afe5b9845ef0994b8c4ab3e]
link root_q to grow_worker--><g id="link_root_q_grow_worker"><path d="M259.56,550.22 C264.62,550.22 269.68,550.22 274.74,550.22 " fill="none" id="root_q-to-grow_worker" style="stroke:#00BFFF;stroke-width:1.0;"/><polygon fill="none" points="274.89,543.22,294.89,550.22,274.89,557.22,274.89,543.22" style="stroke:#00BFFF;stroke-width:1.0;"/></g><!--MD5=[721c3eb2ec58c4fb8b852468b49ceef6]
link grow_worker to growing_q--><g id="link_grow_worker_growing_q"><path d="M350,582.88 C350,597.45 350,614.71 350,629.35 " fill="none" id="grow_worker-to-growing_q" style="stroke:#00BFFF;stroke-width:1.0;"/><polygon fill="none" points="357,629.47,350,649.47,343,629.47,357,629.47" style="stroke:#00BFFF;stroke-width:1.0;"/></g><!--MD5=[de34a8e20bc479fcbeeac231718bc084]
link growing_q to spread_worker--><g id="link_growing_q_spread_worker"><path d="M340.47,675.97 C330.86,688.31 315.42,708.15 300.93,726.77 " fill="none" id="growing_q-to-spread_worker" style="stroke:#00BFFF;stroke-width:1.0;"/><polygon fill="none" points="306.41,731.13,288.6,742.62,295.36,722.53,306.41,731.13" style="stroke:#00BFFF;stroke-width:1.0;"/></g><!--MD5=[be6142c83553d78fb2a5714d092f81e4]
link growing_q to mkdir_worker--><g id="link_growing_q_mkdir_worker"><path d="M354.1,675.97 C357.98,687.56 364.08,705.77 369.98,723.38 " fill="none" id="growing_q-to-mkdir_worker" style="stroke:#00BFFF;stroke-width:1.0;"/><polygon fill="none" points="376.7,721.43,376.42,742.62,363.43,725.87,376.7,721.43" style="stroke:#00BFFF;stroke-width:1.0;"/></g><!--MD5=[134787d4476faccc5d8c3834ad899d84]
link growing_q to verify_worker--><g id="link_growing_q_verify_worker"><path d="M327.24,675.76 C297.65,691.4 244.83,719.32 202.98,741.45 " fill="none" id="growing_q-to-verify_worker" style="stroke:#00BFFF;stroke-width:1.0;"/><polygon fill="none" points="206.19,747.67,185.24,750.83,199.65,735.3,206.19,747.67" style="stroke:#00BFFF;stroke-width:1.0;"/></g><!--MD5=[b871ecd41fe4c3ecb90f2cb075ad31dc]
link split_proc to error_handler--><g id="link_split_proc_error_handler"><path d="M447.75,322.43 C460.62,340.56 477.25,366.92 486,392.72 C508.49,459.02 504,479.21 504,549.22 C504,549.22 504,549.22 504,663.72 C504,730.14 496.39,749.73 464,807.72 C452.25,828.76 434.09,848.68 418.36,863.74 " fill="none" id="split_proc-to-error_handler" style="stroke:#00BFFF;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#00BFFF" points="414.42,867.46,423.7153,864.2045,418.061,864.0332,418.2323,858.3789,414.42,867.46" style="stroke:#00BFFF;stroke-width:1.0;"/></g><!--MD5=[9d8f92d26597db377782d507a4a25abd]
link generate_root_worker to error_handler--><g id="link_generate_root_worker_error_handler"><path d="M411.49,457.76 C437.93,524.22 490.51,682.8 449,807.72 C441.99,828.81 427.31,848.87 414,863.98 " fill="none" id="generate_root_worker-to-error_handler" style="stroke:#00BFFF;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#00BFFF" points="410.64,867.72,419.6262,863.6891,413.9777,863.9972,413.6696,858.3487,410.64,867.72" style="stroke:#00BFFF;stroke-width:1.0;"/></g><!--MD5=[34c1f5504cd331638b6a6a5e9aec81f0]
link grow_worker to error_handler--><g id="link_grow_worker_error_handler"><path d="M314.94,582.8 C295.99,600.16 272.36,622.26 252,642.72 C234.92,659.88 234.69,668.62 215,682.72 C161.61,720.94 115.78,687.67 80,742.72 C64.26,766.94 62.44,784.78 80,807.72 C108,844.29 229.89,868.45 311.41,880.84 " fill="none" id="grow_worker-to-error_handler" style="stroke:#00BFFF;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#00BFFF" points="316.72,881.64,308.4144,876.3468,311.7755,880.8969,307.2255,884.258,316.72,881.64" style="stroke:#00BFFF;stroke-width:1.0;"/></g><!--MD5=[bacc60e9b81586414dc8afc0c49b454b]
link spread_worker to error_handler--><g id="link_spread_worker_error_handler"><path d="M297.94,807.81 C316.84,825.41 340.13,847.09 358.15,863.87 " fill="none" id="spread_worker-to-error_handler" style="stroke:#00BFFF;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#00BFFF" points="362.15,867.58,358.2821,858.5224,358.4881,864.1756,352.835,864.3815,362.15,867.58" style="stroke:#00BFFF;stroke-width:1.0;"/></g><!--MD5=[1c5e2e87900e61b3fd8f405c4137e846]
link mkdir_worker to error_handler--><g id="link_mkdir_worker_error_handler"><path d="M387,807.81 C387,824.82 387,845.64 387,862.16 " fill="none" id="mkdir_worker-to-error_handler" style="stroke:#00BFFF;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#00BFFF" points="387,867.58,391,858.58,387,862.58,383,858.58,387,867.58" style="stroke:#00BFFF;stroke-width:1.0;"/></g><!--MD5=[9f3e639ba80d32ffd7950b4c8ff60914]
link verify_worker to error_handler--><g id="link_verify_worker_error_handler"><path d="M185.24,799.01 C191.19,801.98 197.23,804.95 203,807.72 C244.89,827.8 292.73,849.33 329.13,865.44 " fill="none" id="verify_worker-to-error_handler" style="stroke:#00BFFF;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#00BFFF" points="333.96,867.57,327.3369,860.2806,329.3845,865.5539,324.1112,867.6015,333.96,867.57" style="stroke:#00BFFF;stroke-width:1.0;"/></g><!--MD5=[0bb1f239f0087c15a42ea90f85b82673]
link error_handler to end--><g id="link_error_handler_end"><path d="M457.07,891.72 C482.3,891.72 507.52,891.72 532.75,891.72 " fill="none" id="error_handler-to-end" style="stroke:#00BFFF;stroke-width:1.0;"/><polygon fill="none" points="532.98,884.72,552.98,891.72,532.98,898.72,532.98,884.72" style="stroke:#00BFFF;stroke-width:1.0;"/></g><!--MD5=[3a46b37e8c5ac830f9ac7a0c3a33b28c]
@startuml
skinparam {
  backgroundColor DarkCyan

  InterfaceBackgroundColor #CCFF33
  ComponentStyle rectangle
  ArrowColor DeepSkyBlue
  QueueBorderColor blue
  QueueBackgroundColor DeepSkyBlue
}


' stages
interface "START" as start
card markdown [
- root1
    - a
        - b
- root2
    - c
- root3
    - d
        - e
]

(Launch pipeline) as init

frame "Pipeline" as pipeline {
  control "Split input" as split_proc
  collections "- root1\n    - a\n        - b" as splited
  control "Generate root node\n(10 workers)" as generate_root_worker
  control "Grow root node\n(10 workers)" as grow_worker
  control "Spread tree\n(10 workers)" as spread_worker
  control "Mkdir tree\n(10 workers)" as mkdir_worker
  control "Verify tree\n(10 workers)" as verify_worker
  control "Handle error queue" as error_handler #CC6699

  queue "Markdown root block" as split_q
  queue "Root node" as root_q
  queue "Tree structure node" as growing_q
  note left of growing_q
  Next process is
  Spred, Mkdir or Verify.
  end note
}

interface "END" as end


' flow
markdown . start
start -|> init
init - -|> pipeline
pipeline - -|> split_proc
split_proc - splited
splited - -|> split_q
split_q -|> generate_root_worker
generate_root_worker - -|> root_q
root_q -|> grow_worker
grow_worker - -|> growing_q
growing_q - -|> spread_worker
growing_q - -|> mkdir_worker
growing_q - -|> verify_worker

split_proc ..> error_handler
generate_root_worker ..> error_handler
grow_worker ..> error_handler
spread_worker ..> error_handler
mkdir_worker ..> error_handler
verify_worker ..> error_handler

error_handler -|> end
@enduml

@startuml
skinparam {
  backgroundColor DarkCyan

  InterfaceBackgroundColor #CCFF33
  ComponentStyle rectangle
  ArrowColor DeepSkyBlue
  QueueBorderColor blue
  QueueBackgroundColor DeepSkyBlue
}


interface "START" as start
card markdown [
- root1
    - a
        - b
- root2
    - c
- root3
    - d
        - e
]

(Launch pipeline) as init

frame "Pipeline" as pipeline {
  control "Split input" as split_proc
  collections "- root1\n    - a\n        - b" as splited
  control "Generate root node\n(10 workers)" as generate_root_worker
  control "Grow root node\n(10 workers)" as grow_worker
  control "Spread tree\n(10 workers)" as spread_worker
  control "Mkdir tree\n(10 workers)" as mkdir_worker
  control "Verify tree\n(10 workers)" as verify_worker
  control "Handle error queue" as error_handler #CC6699

  queue "Markdown root block" as split_q
  queue "Root node" as root_q
  queue "Tree structure node" as growing_q
  note left of growing_q
  Next process is
  Spred, Mkdir or Verify.
  end note
}

interface "END" as end


markdown . start
start -|> init
init - -|> pipeline
pipeline - -|> split_proc
split_proc - splited
splited - -|> split_q
split_q -|> generate_root_worker
generate_root_worker - -|> root_q
root_q -|> grow_worker
grow_worker - -|> growing_q
growing_q - -|> spread_worker
growing_q - -|> mkdir_worker
growing_q - -|> verify_worker

split_proc ..> error_handler
generate_root_worker ..> error_handler
grow_worker ..> error_handler
spread_worker ..> error_handler
mkdir_worker ..> error_handler
verify_worker ..> error_handler

error_handler -|> end
@enduml

PlantUML version 1.2022.7(Tue Aug 23 02:01:30 JST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: ja
Country: JP
--></g></svg>
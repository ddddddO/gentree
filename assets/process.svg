<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="931px" preserveAspectRatio="none" style="width:687px;height:931px;background:#008B8B;" version="1.1" viewBox="0 0 687 931" width="687px" zoomAndPan="magnify"><defs/><g><!--MD5=[6328af41db0f7dbb733c9192827ed26b]
cluster pipeline--><g id="cluster_pipeline"><rect fill="none" height="749.72" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;" width="625" x="7" y="176"/><path d="M82,176 L82,185.2969 L72,195.2969 L7,195.2969 " fill="none" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="65" x="10" y="189.9951">Pipeline</text></g><!--MD5=[dfbaac2615e6b58919aa7dca9cc5848c]
entity split_proc--><g id="elem_split_proc"><ellipse cx="533" cy="290.22" fill="#F1F1F1" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="529,278.22,535,273.22,533,278.22,535,283.22,529,278.22" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="497.5" y="319.2151">Split input</text></g><!--MD5=[16aaf2b6864aec8a97df8ae5faa71f6b]
entity splited--><g id="elem_splited"><rect fill="#42DD78" height="64.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="66" x="319" y="267.72"/><rect fill="#42DD78" height="64.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="66" x="315" y="263.72"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="323" y="284.7151">- root1</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18" x="339" y="301.012">- a</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18" x="355" y="317.3089">- b</text></g><!--MD5=[883626f3ee9e613e4e1695c2a8f9e35f]
entity generate_root_worker--><g id="elem_generate_root_worker"><ellipse cx="501" cy="408.72" fill="#F1F1F1" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="497,396.72,503,391.72,501,396.72,503,401.72,497,396.72" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="431" y="437.7151">Generate root node</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="431" y="454.012">(10 workers)</text></g><!--MD5=[d42658a875e6b366d8ed22b8f1d49d51]
entity grow_worker--><g id="elem_grow_worker"><ellipse cx="479" cy="533.72" fill="#F1F1F1" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="475,521.72,481,516.72,479,521.72,481,526.72,475,521.72" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="424" y="562.7151">Grow root node</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="424" y="579.012">(10 workers)</text></g><!--MD5=[d0e066c1a14392698745467dd17d345b]
entity spread_worker--><g id="elem_spread_worker"><ellipse cx="109" cy="744.72" fill="#F1F1F1" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="105,732.72,111,727.72,109,732.72,111,737.72,105,732.72" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156" x="31" y="773.7151">Output directory trees</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="31" y="790.012">(10 workers)</text></g><!--MD5=[dabf35e28b0fe3e280879f10955a7220]
entity mkdir_worker--><g id="elem_mkdir_worker"><ellipse cx="281" cy="744.72" fill="#F1F1F1" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="277,732.72,283,727.72,281,732.72,283,737.72,277,732.72" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="222" y="773.7151">Make directories</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="222" y="790.012">(10 workers)</text></g><!--MD5=[e5273a64d836932b64ae1e1963307c07]
entity verify_worker--><g id="elem_verify_worker"><ellipse cx="436" cy="744.72" fill="#F1F1F1" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="432,732.72,438,727.72,436,732.72,438,737.72,432,732.72" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="375" y="773.7151">Verify directories</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="375" y="790.012">(10 workers)</text></g><!--MD5=[c5c948d6d2820c5c03fe633a7cc80e1b]
entity error_handler--><g id="elem_error_handler"><ellipse cx="533" cy="869.72" fill="#CC6699" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="529,857.72,535,852.72,533,857.72,535,862.72,529,857.72" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="463" y="898.7151">Handle error queue</text></g><!--MD5=[bdc70ded9b301535bd788a3720b71b1a]
entity split_q--><g id="elem_split_q"><path d="M233,412.22 L391,412.22 C396,412.22 396,425.3684 396,425.3684 C396,425.3684 396,438.5169 391,438.5169 L233,438.5169 C228,438.5169 228,425.3684 228,425.3684 C228,425.3684 228,412.22 233,412.22 " fill="#00BFFF" style="stroke:#0000FF;stroke-width:0.5;"/><path d="M391,412.22 C386,412.22 386,425.3684 386,425.3684 C386,438.5169 391,438.5169 391,438.5169 " fill="none" style="stroke:#0000FF;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="148" x="233" y="430.2151">Markdown root block</text></g><!--MD5=[6e6f018fbbc8ddecf21b773d66d61cba]
entity root_q--><g id="elem_root_q"><path d="M300.5,537.22 L383.5,537.22 C388.5,537.22 388.5,550.3684 388.5,550.3684 C388.5,550.3684 388.5,563.5169 383.5,563.5169 L300.5,563.5169 C295.5,563.5169 295.5,550.3684 295.5,550.3684 C295.5,550.3684 295.5,537.22 300.5,537.22 " fill="#00BFFF" style="stroke:#0000FF;stroke-width:0.5;"/><path d="M383.5,537.22 C378.5,537.22 378.5,550.3684 378.5,550.3684 C378.5,563.5169 383.5,563.5169 383.5,563.5169 " fill="none" style="stroke:#0000FF;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="300.5" y="555.2151">Root node</text></g><!--MD5=[759ebcdd875c10595d278c9d978c4973]
entity growing_q--><g id="elem_growing_q"><path d="M205.5,642.72 L356.5,642.72 C361.5,642.72 361.5,655.8684 361.5,655.8684 C361.5,655.8684 361.5,669.0169 356.5,669.0169 L205.5,669.0169 C200.5,669.0169 200.5,655.8684 200.5,655.8684 C200.5,655.8684 200.5,642.72 205.5,642.72 " fill="#00BFFF" style="stroke:#0000FF;stroke-width:0.5;"/><path d="M356.5,642.72 C351.5,642.72 351.5,655.8684 351.5,655.8684 C351.5,669.0169 356.5,669.0169 356.5,669.0169 " fill="none" style="stroke:#0000FF;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141" x="205.5" y="660.7151">Tree structure node</text></g><g id="elem_GMN19"><path d="M105.5,530.22 L105.5,570.4856 A0,0 0 0 0 105.5,570.4856 L197.43,570.4856 L269.4,642.47 L205.43,570.4856 L260.5,570.4856 A0,0 0 0 0 260.5,570.4856 L260.5,540.22 L250.5,530.22 L105.5,530.22 A0,0 0 0 0 105.5,530.22 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M250.5,530.22 L250.5,540.22 L260.5,540.22 L250.5,530.22 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="111.5" y="547.2869">Next process is</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="111.5" y="562.4197">one of the following.</text></g><!--MD5=[c88a36799ca4d6dff2d7449eacfc25f7]
entity start--><g id="elem_start"><ellipse cx="411" cy="75" fill="#CCFF33" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="387.5" y="104.9951">START</text></g><!--MD5=[a3e2068675f98e81fa0b31e92b58c8a6]
entity markdown--><g id="elem_markdown"><rect fill="#42DD78" height="136.375" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="70" x="297" y="7"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="307" y="22.9951">- root1</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18" x="323" y="39.292">- a</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18" x="339" y="55.5889">- b</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="307" y="71.8857">- root2</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="17" x="323" y="88.1826">- c</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="307" y="104.4795">- root3</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18" x="323" y="120.7764">- d</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="18" x="339" y="137.0732">- e</text></g><g id="elem_init"><ellipse cx="532.7532" cy="74.9506" fill="#F1F1F1" rx="77.7532" ry="17.9506" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113" x="473.6994" y="78.5809">Launch pipeline</text></g><!--MD5=[22efa60cf2b4332bf8574b0c93969d71]
entity end--><g id="elem_end"><ellipse cx="665" cy="877.72" fill="#CCFF33" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="650" y="907.7151">END</text></g><!--MD5=[5b4cc3b64451edfab5f176f532845691]
link markdown to start--><g id="link_markdown_start"><path d="M367.18,75 C378.71,75 390.23,75 401.76,75 " fill="none" id="markdown-start" style="stroke:#00BFFF;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/></g><!--MD5=[454b0b980ae1095b7473d8b1e9bb6cba]
link start to init--><g id="link_start_init"><path d="M420.05,75 C424.96,75 429.86,75 434.76,75 " fill="none" id="start-to-init" style="stroke:#00BFFF;stroke-width:1.0;"/><polygon fill="none" points="434.91,68,454.91,75,434.91,82,434.91,68" style="stroke:#00BFFF;stroke-width:1.0;"/></g><!--MD5=[7060c70beb0e2460c89b992bca283af7]
link init to pipeline--><g id="link_init_pipeline"><path d="M533,93.04 C533,110.015 533,136.7625 533,159.5513 C533,165.2484 533,170.6982 533,175.686 " fill="none" id="init-to-pipeline" style="stroke:#00BFFF;stroke-width:1.0;"/><polygon fill="#008B8B" points="533,175.686,540,156.686,526,156.686,533,175.686" style="stroke:#00BFFF;stroke-width:1.0;"/></g><!--MD5=[4bc466e259f359bb306de2e4df9da546]
link pipeline to split_proc--><g id="link_pipeline_split_proc"><path d="M533,203.79 C533,205.24 533,229.89 533,253.5 " fill="none" id="pipeline-to-split_proc" style="stroke:#00BFFF;stroke-width:1.0;"/><polygon fill="none" points="540,253.78,533,273.78,526,253.78,540,253.78" style="stroke:#00BFFF;stroke-width:1.0;"/></g><!--MD5=[7853469dae6b86297a6cab5bdc83c2c5]
link split_proc to splited--><g id="link_split_proc_splited"><path d="M497.45,298.22 C459.98,298.22 422.5,298.22 385.03,298.22 " fill="none" id="split_proc-splited" style="stroke:#00BFFF;stroke-width:1.0;"/></g><!--MD5=[6496682d3967b5f7685c79a7851e2b2d]
link splited to split_q--><g id="link_splited_split_q"><path d="M339.72,333.05 C334.06,351.65 327.09,374.59 321.55,392.8 " fill="none" id="splited-to-split_q" style="stroke:#00BFFF;stroke-width:1.0;"/><polygon fill="none" points="328.21,394.97,315.69,412.07,314.81,390.9,328.21,394.97" style="stroke:#00BFFF;stroke-width:1.0;"/></g><!--MD5=[12cd5d76f0e65352ab6f4dee1eb8cb7d]
link split_q to generate_root_worker--><g id="link_split_q_generate_root_worker"><path d="M396.16,425.22 C401.06,425.22 405.95,425.22 410.85,425.22 " fill="none" id="split_q-to-generate_root_worker" style="stroke:#00BFFF;stroke-width:1.0;"/><polygon fill="none" points="410.97,418.22,430.97,425.22,410.97,432.22,410.97,418.22" style="stroke:#00BFFF;stroke-width:1.0;"/></g><!--MD5=[b33f49e90cd4e1fd8720b8291fe977c4]
link generate_root_worker to root_q--><g id="link_generate_root_worker_root_q"><path d="M460.05,457.9 C433.25,478.63 398.73,505.33 373.96,524.5 " fill="none" id="generate_root_worker-to-root_q" style="stroke:#00BFFF;stroke-width:1.0;"/><polygon fill="none" points="377.99,530.23,357.88,536.93,369.42,519.16,377.99,530.23" style="stroke:#00BFFF;stroke-width:1.0;"/></g><!--MD5=[a2cfaee57afe5b9845ef0994b8c4ab3e]
link root_q to grow_worker--><g id="link_root_q_grow_worker"><path d="M388.56,550.22 C393.62,550.22 398.68,550.22 403.74,550.22 " fill="none" id="root_q-to-grow_worker" style="stroke:#00BFFF;stroke-width:1.0;"/><polygon fill="none" points="403.89,543.22,423.89,550.22,403.89,557.22,403.89,543.22" style="stroke:#00BFFF;stroke-width:1.0;"/></g><!--MD5=[721c3eb2ec58c4fb8b852468b49ceef6]
link grow_worker to growing_q--><g id="link_grow_worker_growing_q"><path d="M423.85,580.05 C391.62,596.9 351.62,617.81 322.15,633.21 " fill="none" id="grow_worker-to-growing_q" style="stroke:#00BFFF;stroke-width:1.0;"/><polygon fill="none" points="325.05,639.6,304.08,642.66,318.56,627.19,325.05,639.6" style="stroke:#00BFFF;stroke-width:1.0;"/></g><!--MD5=[de34a8e20bc479fcbeeac231718bc084]
link growing_q to spread_worker--><g id="link_growing_q_spread_worker"><path d="M260.93,668.8 C240.8,680.91 208.63,700.27 179.06,718.06 " fill="none" id="growing_q-to-spread_worker" style="stroke:#00BFFF;stroke-width:1.0;"/><polygon fill="none" points="182.34,724.26,161.6,728.57,175.12,712.26,182.34,724.26" style="stroke:#00BFFF;stroke-width:1.0;"/></g><!--MD5=[be6142c83553d78fb2a5714d092f81e4]
link growing_q to mkdir_worker--><g id="link_growing_q_mkdir_worker"><path d="M281,669 C281,678.96 281,693.71 281,708.47 " fill="none" id="growing_q-to-mkdir_worker" style="stroke:#00BFFF;stroke-width:1.0;"/><polygon fill="none" points="288,708.48,281,728.48,274,708.48,288,708.48" style="stroke:#00BFFF;stroke-width:1.0;"/></g><!--MD5=[134787d4476faccc5d8c3834ad899d84]
link growing_q to verify_worker--><g id="link_growing_q_verify_worker"><path d="M299.08,668.8 C316.97,680.74 345.4,699.72 371.73,717.31 " fill="none" id="growing_q-to-verify_worker" style="stroke:#00BFFF;stroke-width:1.0;"/><polygon fill="none" points="375.86,711.64,388.6,728.57,368.08,723.29,375.86,711.64" style="stroke:#00BFFF;stroke-width:1.0;"/></g><!--MD5=[b871ecd41fe4c3ecb90f2cb075ad31dc]
link split_proc to error_handler--><g id="link_split_proc_error_handler"><path d="M550.75,322.43 C563.62,340.56 580.25,366.92 589,392.72 C611.49,459.02 607,479.21 607,549.22 C607,549.22 607,549.22 607,656.72 C607,728.94 570.73,807.86 548.98,848.71 " fill="none" id="split_proc-to-error_handler" style="stroke:#00BFFF;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#00BFFF" points="546.4,853.5,554.1911,847.4752,548.7722,849.0986,547.1488,843.6796,546.4,853.5" style="stroke:#00BFFF;stroke-width:1.0;"/></g><!--MD5=[9d8f92d26597db377782d507a4a25abd]
link generate_root_worker to error_handler--><g id="link_generate_root_worker_error_handler"><path d="M523.97,457.95 C534.77,474.82 546.47,496.42 552,517.72 C583.15,637.58 554.6,787.31 540.18,848.6 " fill="none" id="generate_root_worker-to-error_handler" style="stroke:#00BFFF;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#00BFFF" points="539,853.55,544.9934,845.7347,540.169,848.6886,537.2151,843.8642,539,853.55" style="stroke:#00BFFF;stroke-width:1.0;"/></g><!--MD5=[34c1f5504cd331638b6a6a5e9aec81f0]
link grow_worker to error_handler--><g id="link_grow_worker_error_handler"><path d="M486.2,582.82 C494.07,618.22 506.68,677.35 515,728.72 C521.73,770.26 527.17,818.74 530.25,848.58 " fill="none" id="grow_worker-to-error_handler" style="stroke:#00BFFF;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#00BFFF" points="530.76,853.57,533.8393,844.2149,530.2597,848.5951,525.8794,845.0155,530.76,853.57" style="stroke:#00BFFF;stroke-width:1.0;"/></g><!--MD5=[bacc60e9b81586414dc8afc0c49b454b]
link spread_worker to error_handler--><g id="link_spread_worker_error_handler"><path d="M187.19,788.37 C193.2,790.23 199.19,792.03 205,793.72 C291.04,818.69 390.99,843.37 457.73,859.24 " fill="none" id="spread_worker-to-error_handler" style="stroke:#00BFFF;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#00BFFF" points="462.88,860.46,455.0481,854.4883,458.0154,859.3045,453.1992,862.2718,462.88,860.46" style="stroke:#00BFFF;stroke-width:1.0;"/></g><!--MD5=[1c5e2e87900e61b3fd8f405c4137e846]
link mkdir_worker to error_handler--><g id="link_mkdir_worker_error_handler"><path d="M340.08,789.07 C381.6,807.93 436.78,833 477.48,851.49 " fill="none" id="mkdir_worker-to-error_handler" style="stroke:#00BFFF;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#00BFFF" points="482.37,853.72,475.8128,846.3713,477.8128,851.6628,472.5213,853.6629,482.37,853.72" style="stroke:#00BFFF;stroke-width:1.0;"/></g><!--MD5=[9f3e639ba80d32ffd7950b4c8ff60914]
link verify_worker to error_handler--><g id="link_verify_worker_error_handler"><path d="M462.76,793.81 C477.55,811.26 495.73,832.73 509.89,849.44 " fill="none" id="verify_worker-to-error_handler" style="stroke:#00BFFF;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#00BFFF" points="513.4,853.58,510.6385,844.1262,510.1696,849.7636,504.5323,849.2948,513.4,853.58" style="stroke:#00BFFF;stroke-width:1.0;"/></g><!--MD5=[0bb1f239f0087c15a42ea90f85b82673]
link error_handler to end--><g id="link_error_handler_end"><path d="M603.12,877.72 C613.96,877.72 624.8,877.72 635.64,877.72 " fill="none" id="error_handler-to-end" style="stroke:#00BFFF;stroke-width:1.0;"/><polygon fill="none" points="635.82,870.72,655.82,877.72,635.82,884.72,635.82,870.72" style="stroke:#00BFFF;stroke-width:1.0;"/></g><!--MD5=[afb2bbe78e97bfe119b364207a7bc32b]
@startuml
skinparam {
  backgroundColor DarkCyan

  InterfaceBackgroundColor #CCFF33
  ComponentStyle rectangle
  ArrowColor DeepSkyBlue
  QueueBorderColor blue
  QueueBackgroundColor DeepSkyBlue
}


' stages
interface "START" as start
card markdown #42DD78 [
- root1
    - a
        - b
- root2
    - c
- root3
    - d
        - e
]

(Launch pipeline) as init

frame "Pipeline" as pipeline {
  control "Split input" as split_proc
  collections "- root1\n    - a\n        - b" as splited #42DD78
  control "Generate root node\n(10 workers)" as generate_root_worker
  control "Grow root node\n(10 workers)" as grow_worker
  control "Output directory trees\n(10 workers)" as spread_worker
  control "Make directories\n(10 workers)" as mkdir_worker
  control "Verify directories\n(10 workers)" as verify_worker
  control "Handle error queue" as error_handler #CC6699

  queue "Markdown root block" as split_q
  queue "Root node" as root_q
  queue "Tree structure node" as growing_q
  note top of growing_q
  Next process is
  one of the following.
  end note
}

interface "END" as end


' flow
markdown . start
start -|> init
init - -|> pipeline
pipeline - -|> split_proc
split_proc - splited
splited - -|> split_q
split_q -|> generate_root_worker
generate_root_worker - -|> root_q
root_q -|> grow_worker
grow_worker - -|> growing_q
growing_q - -|> spread_worker
growing_q - -|> mkdir_worker
growing_q - -|> verify_worker

split_proc ..> error_handler
generate_root_worker ..> error_handler
grow_worker ..> error_handler
spread_worker ..> error_handler
mkdir_worker ..> error_handler
verify_worker ..> error_handler

error_handler -|> end
@enduml

@startuml
skinparam {
  backgroundColor DarkCyan

  InterfaceBackgroundColor #CCFF33
  ComponentStyle rectangle
  ArrowColor DeepSkyBlue
  QueueBorderColor blue
  QueueBackgroundColor DeepSkyBlue
}


interface "START" as start
card markdown #42DD78 [
- root1
    - a
        - b
- root2
    - c
- root3
    - d
        - e
]

(Launch pipeline) as init

frame "Pipeline" as pipeline {
  control "Split input" as split_proc
  collections "- root1\n    - a\n        - b" as splited #42DD78
  control "Generate root node\n(10 workers)" as generate_root_worker
  control "Grow root node\n(10 workers)" as grow_worker
  control "Output directory trees\n(10 workers)" as spread_worker
  control "Make directories\n(10 workers)" as mkdir_worker
  control "Verify directories\n(10 workers)" as verify_worker
  control "Handle error queue" as error_handler #CC6699

  queue "Markdown root block" as split_q
  queue "Root node" as root_q
  queue "Tree structure node" as growing_q
  note top of growing_q
  Next process is
  one of the following.
  end note
}

interface "END" as end


markdown . start
start -|> init
init - -|> pipeline
pipeline - -|> split_proc
split_proc - splited
splited - -|> split_q
split_q -|> generate_root_worker
generate_root_worker - -|> root_q
root_q -|> grow_worker
grow_worker - -|> growing_q
growing_q - -|> spread_worker
growing_q - -|> mkdir_worker
growing_q - -|> verify_worker

split_proc ..> error_handler
generate_root_worker ..> error_handler
grow_worker ..> error_handler
spread_worker ..> error_handler
mkdir_worker ..> error_handler
verify_worker ..> error_handler

error_handler -|> end
@enduml

PlantUML version 1.2022.7(Tue Aug 23 02:01:30 JST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: ja
Country: JP
--></g></svg>